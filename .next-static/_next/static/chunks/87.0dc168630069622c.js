(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87],{65225:function(t,e,n){"use strict";var r,i,a,o;n.d(e,{k$:function(){return i},y$:function(){return r}}),(a=r||(r={})).Heavy="HEAVY",a.Medium="MEDIUM",a.Light="LIGHT",(o=i||(i={})).Success="SUCCESS",o.Warning="WARNING",o.Error="ERROR"},98140:function(t,e,n){"use strict";n.d(e,{ej:function(){return a},y$:function(){return i.y$}});var r=n(56689),i=n(65225);let a=(0,r.fo)("Haptics",{web:()=>n.e(151).then(n.bind(n,5151)).then(t=>new t.HapticsWeb)})},31671:function(t,e,n){"use strict";n.d(e,{u:function(){return r}});let r=(0,n(56689).fo)("Preferences",{web:()=>n.e(565).then(n.bind(n,15565)).then(t=>new t.PreferencesWeb)})},21021:function(t,e,n){"use strict";n.d(e,{m:function(){return r}});let r=(0,n(56689).fo)("Share",{web:()=>n.e(224).then(n.bind(n,67224)).then(t=>new t.ShareWeb)})},40257:function(t,e,n){"use strict";var r,i;t.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(44227)},44227:function(t){!function(){var e={229:function(t){var e,n,r,i=t.exports={};function a(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===a||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:a}catch(t){e=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var c=[],l=!1,u=-1;function p(){l&&r&&(l=!1,r.length?c=r.concat(c):u=-1,c.length&&h())}function h(){if(!l){var t=s(p);l=!0;for(var e=c.length;e;){for(r=c,c=[];++u<e;)r&&r[u].run();u=-1,e=c.length}r=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function d(){}i.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new f(t,e)),1!==c.length||l||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.prependListener=d,i.prependOnceListener=d,i.listeners=function(t){return[]},i.binding=function(t){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var a=n[t]={exports:{}},o=!0;try{e[t](a,a.exports,r),o=!1}finally{o&&delete n[t]}return a.exports}r.ab="//";var i=r(229);t.exports=i}()},91087:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return b}});var r,i,a,o,s,c,l,u,p=n(57437),h=n(2265),f=n(56689);(r=s||(s={})).Dark="DARK",r.Light="LIGHT",r.Default="DEFAULT",(i=c||(c={})).None="NONE",i.Slide="SLIDE",i.Fade="FADE";let d=(0,f.fo)("StatusBar");(a=l||(l={})).Dark="DARK",a.Light="LIGHT",a.Default="DEFAULT",(o=u||(u={})).Body="body",o.Ionic="ionic",o.Native="native",o.None="none";let y=(0,f.fo)("Keyboard");var m=n(8774);function b(t){let{children:e}=t;return(0,h.useEffect)(()=>{m.Z.isPlatformNative()&&(async()=>{try{await d.setStyle({style:"dark"}),await d.setBackgroundColor({color:"#ffffff"}),document.documentElement.classList.add("ios-app"),y.addListener("keyboardWillShow",t=>{document.documentElement.style.setProperty("--keyboard-height","".concat(t.keyboardHeight,"px")),document.documentElement.classList.add("keyboard-visible")}),y.addListener("keyboardWillHide",()=>{document.documentElement.style.setProperty("--keyboard-height","0px"),document.documentElement.classList.remove("keyboard-visible")}),document.body.addEventListener("touchmove",t=>{t.target.closest(".scrollable")||t.preventDefault()},{passive:!1});let t=document.querySelector('meta[name="viewport"]');return t&&(t.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"),m.Z.isOnline()&&m.Z.cacheRecentPuzzles(),()=>{y.removeAllListeners()}}catch(t){console.error("Error setting up iOS container:",t)}})()},[]),(0,h.useEffect)(()=>{if(!m.Z.isPlatformNative())return;let t=document.createElement("style");return t.textContent='\n      /* iOS-specific global styles */\n      .ios-app {\n        -webkit-touch-callout: none;\n        -webkit-user-select: none;\n        user-select: none;\n        -webkit-tap-highlight-color: transparent;\n        touch-action: manipulation;\n      }\n\n      /* Safe area insets for iOS */\n      .ios-app {\n        padding-top: env(safe-area-inset-top);\n        padding-bottom: env(safe-area-inset-bottom);\n        padding-left: env(safe-area-inset-left);\n        padding-right: env(safe-area-inset-right);\n      }\n\n      /* Keyboard adjustments */\n      .ios-app.keyboard-visible {\n        padding-bottom: var(--keyboard-height, 0);\n        transition: padding-bottom 0.3s ease;\n      }\n\n      /* Disable bounce scroll */\n      .ios-app body {\n        position: fixed;\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n      }\n\n      /* Allow scrolling in specific areas */\n      .ios-app .scrollable {\n        overflow-y: auto;\n        -webkit-overflow-scrolling: touch;\n        overscroll-behavior-y: contain;\n      }\n\n      /* Input focus styles for iOS */\n      .ios-app input:focus,\n      .ios-app textarea:focus,\n      .ios-app select:focus {\n        outline: none;\n        border-color: #3b82f6;\n      }\n\n      /* Button active states for iOS */\n      .ios-app button:active {\n        opacity: 0.8;\n        transform: scale(0.98);\n      }\n\n      /* Disable text selection except in inputs */\n      .ios-app *:not(input):not(textarea) {\n        -webkit-user-select: none;\n        user-select: none;\n      }\n\n      /* Fix for iOS rubber band scrolling */\n      .ios-app .game-container {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        overflow: hidden;\n      }\n\n      /* Ensure modals appear above everything on iOS */\n      .ios-app .modal,\n      .ios-app [role="dialog"] {\n        z-index: 9999;\n      }\n\n      /* iOS-style transitions */\n      .ios-app * {\n        -webkit-transform: translateZ(0);\n        -webkit-backface-visibility: hidden;\n      }\n\n      /* Prevent zoom on double tap */\n      .ios-app button,\n      .ios-app input,\n      .ios-app select,\n      .ios-app textarea {\n        touch-action: manipulation;\n      }\n\n      /* Fix for iOS form inputs */\n      .ios-app input[type="text"],\n      .ios-app input[type="email"],\n      .ios-app input[type="password"],\n      .ios-app textarea {\n        font-size: 16px; /* Prevents zoom on focus */\n        -webkit-appearance: none;\n        border-radius: 0;\n      }\n\n      /* Custom scrollbar for iOS */\n      .ios-app ::-webkit-scrollbar {\n        width: 6px;\n        height: 6px;\n      }\n\n      .ios-app ::-webkit-scrollbar-thumb {\n        background: rgba(0, 0, 0, 0.2);\n        border-radius: 3px;\n      }\n\n      .ios-app ::-webkit-scrollbar-track {\n        background: transparent;\n      }\n    ',document.head.appendChild(t),()=>{document.head.removeChild(t)}},[]),(0,p.jsx)(p.Fragment,{children:e})}},8774:function(t,e,n){"use strict";var r=n(56689),i=n(21021),a=n(98140),o=n(31671),s=n(40257);class c{isPlatformNative(){return this.isNative}isPlatformWeb(){return this.isWeb}async fetchPuzzle(t){let e="".concat(this.apiUrl,"/api/puzzle?date=").concat(t);try{let n=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok)throw Error("API Error: ".concat(n.status));let r=await n.json();return this.isNative&&await this.cachePuzzle(t,r),r}catch(e){if(console.error("Error fetching puzzle:",e),this.isNative){let e=await this.getOfflinePuzzle(t);if(e)return e}throw e}}async fetchStats(){let t="".concat(this.apiUrl,"/api/stats");try{let e=await fetch(t);if(!e.ok)throw Error("Failed to fetch stats");return await e.json()}catch(t){return console.error("Error fetching stats:",t),{played:0,won:0,currentStreak:0,maxStreak:0}}}async updateStats(t){let e="".concat(this.apiUrl,"/api/stats");try{let n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw Error("Failed to update stats");return await n.json()}catch(t){throw console.error("Error updating stats:",t),t}}async cachePuzzle(t,e){if(this.isNative)try{let n="".concat(this.CACHE_PREFIX).concat(t);await o.u.set({key:n,value:JSON.stringify(e)}),await this.cleanOldCache()}catch(t){console.error("Error caching puzzle:",t)}}async getOfflinePuzzle(t){if(!this.isNative)return null;try{let e="".concat(this.CACHE_PREFIX).concat(t),{value:n}=await o.u.get({key:e});return n?JSON.parse(n):null}catch(t){return console.error("Error getting offline puzzle:",t),null}}async cacheRecentPuzzles(){if(this.isNative)try{let t=new Date,e=[];for(let n=0;n<this.CACHE_DAYS;n++){let r=new Date(t);r.setDate(r.getDate()-n);let i=r.toISOString().split("T")[0];e.push(this.fetchPuzzle(i).catch(()=>null))}await Promise.all(e),console.log("Recent puzzles cached for offline use")}catch(t){console.error("Error caching recent puzzles:",t)}}async cleanOldCache(){if(this.isNative)try{let{keys:t}=await o.u.keys(),e=new Date,n=new Date(e);for(let e of(n.setDate(n.getDate()-this.CACHE_DAYS),t))if(e.startsWith(this.CACHE_PREFIX)){let t=e.replace(this.CACHE_PREFIX,"");new Date(t)<n&&await o.u.remove({key:e})}}catch(t){console.error("Error cleaning cache:",t)}}async share(t){try{if(this.isNative&&i.m)return await i.m.share({title:t.title||"Tandem Daily",text:t.text,url:t.url||"https://tandemdaily.com",dialogTitle:"Share your results"});if(navigator.share)return await navigator.share(t),{activityType:"web"};return await navigator.clipboard.writeText(t.text),{activityType:"clipboard"}}catch(e){console.error("Error sharing:",e);try{return await navigator.clipboard.writeText(t.text),{activityType:"clipboard"}}catch(t){throw e}}}async haptic(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"medium";if(this.isNative&&a.ej)try{let e={light:a.y$.Light,medium:a.y$.Medium,heavy:a.y$.Heavy};await a.ej.impact({style:e[t]||a.y$.Medium})}catch(t){console.error("Haptic feedback error:",t)}}async vibrate(){if(this.isNative&&a.ej)try{await a.ej.vibrate({duration:100})}catch(t){console.error("Vibration error:",t)}}async getPreference(t){if(!this.isNative)return localStorage.getItem(t);try{let{value:e}=await o.u.get({key:t});return e}catch(t){return console.error("Error getting preference:",t),null}}async setPreference(t,e){if(this.isNative)try{await o.u.set({key:t,value:e})}catch(t){console.error("Error setting preference:",t)}else localStorage.setItem(t,e)}getApiUrl(t){return"".concat(this.apiUrl).concat(t)}isOnline(){return navigator.onLine}constructor(){this.isNative=r.Capacitor.isNativePlatform(),this.isIOS="ios"===r.Capacitor.getPlatform(),this.isWeb="web"===r.Capacitor.getPlatform(),this.apiUrl=this.isNative?"https://tandemdaily.com":s.env.NEXT_PUBLIC_API_URL||"",this.CACHE_PREFIX="tandem_puzzle_",this.CACHE_DAYS=7}}let l=new c;e.Z=l}}]);