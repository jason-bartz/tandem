(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5777:function(e,t,a){Promise.resolve().then(a.bind(a,45086))},45086:function(e,t,a){"use strict";a.d(t,{default:function(){return L}});var r=a(57437),s=a(2265),l=a(2615);class n{async getPuzzle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let t=e?"".concat(l.Pn.PUZZLE,"?date=").concat(e):l.Pn.PUZZLE,a=await fetch(t);if(!a.ok)throw Error("Failed to fetch puzzle: ".concat(a.status));return await a.json()}catch(e){throw console.error("PuzzleService.getPuzzle error:",e),e}}async submitCompletion(e){try{let t=await fetch(l.Pn.PUZZLE,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to submit completion: ".concat(t.status));return await t.json()}catch(e){throw console.error("PuzzleService.submitCompletion error:",e),e}}async getHint(e,t){try{let a=await fetch("".concat(l.Pn.PUZZLE,"/hint"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({puzzleId:e,questionIndex:t})});if(!a.ok)throw Error("Failed to get hint: ".concat(a.status));return await a.json()}catch(e){throw console.error("PuzzleService.getHint error:",e),e}}async validateAnswer(e,t,a){try{let r=await fetch("".concat(l.Pn.PUZZLE,"/validate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({puzzleId:e,questionIndex:t,answer:a.toUpperCase()})});if(!r.ok)throw Error("Failed to validate answer: ".concat(r.status));return await r.json()}catch(e){throw console.error("PuzzleService.validateAnswer error:",e),e}}async getUpcomingPuzzles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;try{let t=await fetch("".concat(l.Pn.PUZZLE,"/upcoming?days=").concat(e));if(!t.ok)throw Error("Failed to fetch upcoming puzzles: ".concat(t.status));return await t.json()}catch(e){throw console.error("PuzzleService.getUpcomingPuzzles error:",e),e}}}var i=new n,o=a(66474),c=a(55156);let d=null;function u(){return d||(d=new(window.AudioContext||window.webkitAudioContext)),d}function m(){let e=u();if(!e)return;let t=e.currentTime;[{freq:523.25,start:0,duration:.15},{freq:659.25,start:.1,duration:.15},{freq:783.99,start:.2,duration:.15},{freq:1046.5,start:.3,duration:.4},{freq:1318.51,start:.35,duration:.35}].forEach(a=>{let{freq:r,start:s,duration:l}=a,n=e.createOscillator(),i=e.createGain();n.type="sine",n.frequency.setValueAtTime(r,t+s),i.gain.setValueAtTime(0,t+s),i.gain.linearRampToValueAtTime(.15,t+s+.02),i.gain.exponentialRampToValueAtTime(.05,t+s+.7*l),i.gain.linearRampToValueAtTime(0,t+s+l);let o=e.createOscillator();o.frequency.value=5;let c=e.createGain();c.gain.value=2,o.connect(c),c.connect(n.frequency),n.connect(i),i.connect(e.destination),n.start(t+s),n.stop(t+s+l),o.start(t+s),o.stop(t+s+l)});let a=t+.4,r=e.createOscillator(),s=e.createGain();r.type="triangle",r.frequency.setValueAtTime(2093,a),s.gain.setValueAtTime(0,a),s.gain.linearRampToValueAtTime(.08,a+.01),s.gain.exponentialRampToValueAtTime(.001,a+.5),r.connect(s),s.connect(e.destination),r.start(a),r.stop(a+.5)}var x=a(33145);function h(e){let{theme:t,toggleTheme:a}=e;return(0,r.jsx)("button",{onClick:a,className:"w-12 h-12 rounded-full bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm shadow-lg flex items-center justify-center text-xl hover:scale-110 transition-all",title:"dark"===t?"Switch to Light Mode":"Switch to Dark Mode",children:"dark"===t?"☀️":"\uD83C\uDF19"})}function g(e){let{isOpen:t,onClose:a}=e,[l,n]=(0,s.useState)(null);if((0,s.useEffect)(()=>{t&&n((0,c.qw)())},[t]),!t||!l)return null;let i=l.gamesPlayed>0?Math.round(l.gamesWon/l.gamesPlayed*100):0;return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200",children:"Your Statistics"}),(0,r.jsx)("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"✕"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-100 dark:bg-gray-700 rounded-xl",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-gray-800 dark:text-gray-200",children:l.gamesPlayed}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Games Played"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-100 dark:bg-gray-700 rounded-xl",children:[(0,r.jsxs)("div",{className:"text-3xl font-bold text-gray-800 dark:text-gray-200",children:[i,"%"]}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Win Rate"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-100 dark:bg-gray-700 rounded-xl",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-gray-800 dark:text-gray-200",children:l.currentStreak}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Current Streak"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-100 dark:bg-gray-700 rounded-xl",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-gray-800 dark:text-gray-200",children:l.maxStreak}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Max Streak"})]})]}),l.averageTime&&(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-100 dark:bg-gray-700 rounded-xl mb-6",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200",children:l.averageTime}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Average Time"})]}),(0,r.jsx)("button",{onClick:a,className:"w-full py-3 bg-gradient-to-r from-sky-500 to-teal-400 text-white font-semibold rounded-xl hover:shadow-lg transition-all",children:"Close"})]})})}let p={puzzles:[],lastFetch:null,isLoading:!1};function f(e){let{isOpen:t,onClose:a,onSelectPuzzle:l}=e,[n,i]=(0,s.useState)(p.puzzles||[]),[d,u]=(0,s.useState)(!1),m=(0,s.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Date.now();if(!e&&p.lastFetch&&t-p.lastFetch<3e4&&p.puzzles.length>0){let e=(0,c.EX)(),t=p.puzzles.map(t=>{let a=e[t.date]||{};return{...t,completed:a.completed||!1,failed:a.failed||!1,attempted:a.attempted||!1,status:a.status||"not_played",time:a.time,mistakes:a.mistakes,solved:a.solved}});i(t),p.puzzles=t;return}if(!p.isLoading){p.isLoading=!0,u(!0);try{let e=(0,c.EX)(),t=(0,o.nz)().isoDate,a=new Date("2025-08-16T00:00:00"),r=new Date(t+"T00:00:00"),s=[],l=new Date(a);for(;l<r;){let e=l.getFullYear(),t=String(l.getMonth()+1).padStart(2,"0"),a=String(l.getDate()).padStart(2,"0");s.push("".concat(e,"-").concat(t,"-").concat(a)),l.setDate(l.getDate()+1)}try{let t=await fetch("/api/puzzles/batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dates:s})});if(t.ok){let a=await t.json(),r=[];for(let t of s){let s=a.puzzles[t];if(s&&s.puzzle){let a=e[t]||{};r.push({date:t,theme:s.puzzle.theme,completed:a.completed||!1,failed:a.failed||!1,attempted:a.attempted||!1,status:a.status||"not_played",time:a.time,mistakes:a.mistakes,solved:a.solved,puzzleNumber:s.puzzleNumber})}}r.sort((e,t)=>t.date.localeCompare(e.date)),i(r),p.puzzles=r,p.lastFetch=Date.now();return}}catch(e){console.error("Batch fetch failed:",e)}let n=s.map(async t=>{try{let a=await fetch("/api/puzzle?date=".concat(t));if(a.ok){let r=await a.json();if(r.puzzle){let a=e[t]||{};return{date:t,theme:r.puzzle.theme,completed:a.completed||!1,failed:a.failed||!1,attempted:a.attempted||!1,status:a.status||"not_played",time:a.time,mistakes:a.mistakes,solved:a.solved,puzzleNumber:r.puzzleNumber}}}}catch(e){console.error("Failed to fetch puzzle for ".concat(t,":"),e)}return null}),d=(await Promise.all(n)).filter(e=>null!==e);d.sort((e,t)=>t.date.localeCompare(e.date)),i(d),p.puzzles=d,p.lastFetch=Date.now()}catch(e){console.error("Error loading archive puzzles:",e)}finally{u(!1),p.isLoading=!1}}},[]);if((0,s.useEffect)(()=>{t&&m()},[t,m]),!t)return null;let x=e=>{let t=new Date(e+"T00:00:00"),a=new Date;a.setHours(0,0,0,0);let r=new Date(a);return(r.setDate(r.getDate()-1),t.getTime()===a.getTime())?"Today":t.getTime()===r.getTime()?"Yesterday":t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})};return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full max-h-[80vh] overflow-hidden flex flex-col",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200",children:"Puzzle Archive"}),(0,r.jsx)("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"✕"})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2",children:0===n.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-sky-500"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading puzzles..."})]}):n.map(e=>(0,r.jsx)("button",{onClick:()=>{l(e.date)},className:"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-xl hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-left",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"font-semibold text-gray-800 dark:text-gray-200",children:[x(e.date),e.puzzleNumber&&(0,r.jsxs)("span",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:["#",e.puzzleNumber]})]}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.theme||"No theme"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["completed"===e.status&&(0,r.jsx)("div",{className:"text-green-500 text-xl",title:"Completed",children:"✓"}),"failed"===e.status&&(0,r.jsx)("div",{className:"text-red-500 text-xl",title:"Failed",children:"✗"}),"attempted"===e.status&&(0,r.jsx)("div",{className:"text-yellow-500 text-xl",title:"In Progress",children:"◐"}),"not_played"===e.status&&(0,r.jsx)("div",{className:"text-gray-400 text-xl",title:"Not Played",children:"○"})]})]})},e.date))}),(0,r.jsx)("button",{onClick:a,className:"mt-4 w-full py-3 bg-gradient-to-r from-sky-500 to-teal-400 text-white font-semibold rounded-xl hover:shadow-lg transition-all",children:"Close"})]})})}let y={data:null,timestamp:null,isLoading:!1};function b(){let[e,t]=(0,s.useState)(!1);return{preloadArchive:(0,s.useCallback)(async()=>{if(y.data&&y.timestamp&&Date.now()-y.timestamp<6e4)return y.data;if(!y.isLoading){y.isLoading=!0,t(!0);try{let e=(0,c.EX)(),t=(0,o.nz)().isoDate,a=["2025-08-16","2025-08-17","2025-08-18","2025-08-19","2025-08-20","2025-08-21","2025-08-22","2025-08-23","2025-08-24","2025-08-25","2025-08-26","2025-08-27","2025-08-28","2025-08-29","2025-08-30"].filter(e=>{let a=new Date(e+"T00:00:00"),r=new Date(t+"T00:00:00");return a<r}),r=await fetch("/api/puzzles/batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dates:a})});if(r.ok){let t=await r.json(),s=[];for(let r of a){let a=t.puzzles[r];if(a&&a.puzzle){let t=e[r]||{};s.push({date:r,theme:a.puzzle.theme,completed:t.completed||!1,failed:t.failed||!1,attempted:t.attempted||!1,status:t.status||"not_played",time:t.time,mistakes:t.mistakes,solved:t.solved,puzzleNumber:a.puzzleNumber})}}return s.sort((e,t)=>t.date.localeCompare(e.date)),y.data=s,y.timestamp=Date.now(),s}}catch(e){console.error("Error preloading archive:",e)}finally{y.isLoading=!1,t(!1)}}},[]),getCachedData:(0,s.useCallback)(()=>y.data&&y.timestamp&&Date.now()-y.timestamp<6e4?y.data:null,[]),isPreloading:e}}function w(e){let{onStart:t,theme:a,toggleTheme:l,onSelectPuzzle:n,puzzle:i}=e,c=(0,o.nz)(),[d,m]=(0,s.useState)(!1),[p,y]=(0,s.useState)(!1),{preloadArchive:w}=b();return(0,r.jsxs)("div",{className:"animate-fade-in",children:[(0,r.jsxs)("div",{className:"flex justify-end gap-2 mb-4",children:[(0,r.jsx)("button",{onClick:()=>m(!0),className:"w-12 h-12 rounded-full bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm shadow-lg flex items-center justify-center text-xl hover:scale-110 transition-all",title:"Statistics",children:"\uD83D\uDCCA"}),(0,r.jsx)("button",{onClick:()=>y(!0),onMouseEnter:()=>w(),className:"w-12 h-12 rounded-full bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm shadow-lg flex items-center justify-center text-xl hover:scale-110 transition-all",title:"Archive",children:"\uD83D\uDCC5"}),(0,r.jsx)(h,{theme:a,toggleTheme:l})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl overflow-hidden p-10 text-center",children:[(0,r.jsx)("div",{className:"w-24 h-24 mx-auto mb-5 relative",children:(0,r.jsx)(x.default,{src:"dark"===a?"/images/dark-mode-logo.webp":"/images/main-logo.webp",alt:"Tandem Logo",width:96,height:96,className:"rounded-2xl",priority:!0})}),(0,r.jsx)("p",{className:"text-gray-text dark:text-gray-300 text-lg font-medium mb-8",children:"4 answers. 2 emojis each. 1 theme."}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-2xl p-6 mb-6 text-left",children:[(0,r.jsx)("h3",{className:"text-sm uppercase tracking-wider text-gray-text dark:text-gray-300 mb-4 font-semibold",children:"How to Play"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-white dark:bg-gray-700 rounded-xl flex items-center justify-center mr-3 text-xl flex-shrink-0",children:"\uD83C\uDFAF"}),(0,r.jsx)("span",{className:"text-dark-text dark:text-gray-200 text-sm pt-2.5",children:"Use the theme to guide your answers"})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-white dark:bg-gray-700 rounded-xl flex items-center justify-center mr-3 text-xl flex-shrink-0",children:"✌️"}),(0,r.jsx)("span",{className:"text-dark-text dark:text-gray-200 text-sm pt-2.5",children:"Each emoji pair = one word"})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-white dark:bg-gray-700 rounded-xl flex items-center justify-center mr-3 text-xl flex-shrink-0",children:"✅"}),(0,r.jsx)("span",{className:"text-dark-text dark:text-gray-200 text-sm pt-2.5",children:"4 mistakes allowed"})]})]})]}),(0,r.jsx)("button",{onClick:()=>{try{!function(){let e=u();if(!e)return;let t=e.currentTime;[{freq:392,start:0,duration:.08},{freq:523.25,start:.05,duration:.08},{freq:659.25,start:.1,duration:.12}].forEach(a=>{let{freq:r,start:s,duration:l}=a,n=e.createOscillator(),i=e.createGain();n.type="triangle",n.frequency.setValueAtTime(r,t+s),i.gain.setValueAtTime(0,t+s),i.gain.linearRampToValueAtTime(.15,t+s+.01),i.gain.exponentialRampToValueAtTime(.01,t+s+l),n.connect(i),i.connect(e.destination),n.start(t+s),n.stop(t+s+l)});let a=e.createOscillator(),r=e.createGain();a.type="sine",a.frequency.setValueAtTime(1046.5,t+.15),r.gain.setValueAtTime(0,t+.15),r.gain.linearRampToValueAtTime(.08,t+.16),r.gain.exponentialRampToValueAtTime(.001,t+.25),a.connect(r),r.connect(e.destination),a.start(t+.15),a.stop(t+.25)}()}catch(e){}t()},disabled:!i,className:"w-full p-4 bg-gradient-to-r from-sky-500 to-teal-400 text-white border-none rounded-2xl text-base font-bold cursor-pointer transition-all uppercase tracking-wider hover:-translate-y-0.5 hover:shadow-lg hover:shadow-sky-500/30 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:i?"Play Today's Puzzle":"Loading Puzzle..."}),(0,r.jsx)("div",{className:"text-gray-text dark:text-gray-400 text-sm mt-4",children:c.date})]}),(0,r.jsx)(g,{isOpen:d,onClose:()=>m(!1)}),(0,r.jsx)(f,{isOpen:p,onClose:()=>y(!1),onSelectPuzzle:e=>{y(!1),setTimeout(()=>{n(e)},100)}})]})}function k(e){let{emoji:t,value:a,onChange:s,isCorrect:l,isWrong:n,index:i,onEnterPress:o,hintData:c}=e;return(0,r.jsxs)("div",{className:"flex gap-2 sm:gap-3 items-center",style:{animationDelay:"".concat((i+1)*100,"ms")},children:[(0,r.jsx)("div",{className:"w-[70px] sm:w-[80px] h-[60px] sm:h-[70px] px-1 sm:px-2 bg-light-sand dark:bg-gray-700 rounded-[18px] flex items-center justify-center shadow-md transition-all hover:scale-105 hover:shadow-lg flex-shrink-0",children:(0,r.jsx)("span",{className:"text-2xl sm:text-3xl flex items-center justify-center gap-0 whitespace-nowrap",children:t})}),(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)("input",{type:"text",value:a,onChange:e=>s(e.target.value),onKeyDown:e=>{"Enter"===e.key&&o&&(e.preventDefault(),o())},placeholder:(()=>{if(!c)return"Enter answer";let e=Array(c.length-1).fill("_").join(" ");return"".concat(c.firstLetter," ").concat(e)})(),maxLength:15,disabled:l,className:"\n            w-full p-3 sm:p-4 border-2 rounded-xl text-sm sm:text-base font-medium transition-all outline-none uppercase\n            ".concat(l?"bg-gradient-to-r from-teal-500 to-green-500 text-white border-teal-500 animate-link-snap":n?"bg-red-50 dark:bg-red-900/20 border-red-400 dark:border-red-600 text-red-900 dark:text-red-400 animate-shake":c?"bg-yellow-50 dark:bg-yellow-900/20 text-dark-text dark:text-gray-200 border-yellow-400 dark:border-yellow-600 focus:border-sky-500 dark:focus:border-sky-400 focus:shadow-md focus:shadow-sky-500/20":"bg-off-white dark:bg-gray-800 text-dark-text dark:text-gray-200 border-border-color dark:border-gray-600 focus:border-sky-500 dark:focus:border-sky-400 focus:shadow-md focus:shadow-sky-500/20","\n            disabled:cursor-not-allowed\n            ").concat(c?"placeholder:text-gray-700 dark:placeholder:text-gray-300 placeholder:font-semibold placeholder:tracking-wider":"","\n          ")}),c&&!l&&(0,r.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xl",children:"\uD83D\uDCA1"})]})]})}function v(e){let{time:t,mistakes:a,solved:s}=e;return(0,r.jsxs)("div",{className:"flex justify-around mb-6 p-4 bg-light-sand dark:bg-gray-800 rounded-2xl",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-xl font-bold text-dark-text dark:text-gray-200",children:t}),(0,r.jsx)("div",{className:"text-xs text-gray-text dark:text-gray-400 mt-1",children:"Time"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-xl font-bold text-dark-text dark:text-gray-200",children:[a,"/4"]}),(0,r.jsx)("div",{className:"text-xs text-gray-text dark:text-gray-400 mt-1",children:"Mistakes"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-xl font-bold text-dark-text dark:text-gray-200",children:[s,"/4"]}),(0,r.jsx)("div",{className:"text-xs text-gray-text dark:text-gray-400 mt-1",children:"Solved"})]})]})}function j(e){let{isOpen:t,onClose:a}=e;return t?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200",children:"How to Play"}),(0,r.jsx)("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"✕"})]}),(0,r.jsxs)("div",{className:"space-y-4 text-gray-600 dark:text-gray-400",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"\uD83C\uDFAF Goal"}),(0,r.jsx)("p",{children:"Guess 4 words based on emoji pairs. All words share a secret theme!"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"\uD83C\uDFAE How to Play"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-1",children:[(0,r.jsx)("li",{children:"Look at each pair of emojis"}),(0,r.jsx)("li",{children:"Type the word they represent"}),(0,r.jsx)("li",{children:'Click "Check Answers" when ready'}),(0,r.jsx)("li",{children:"Green = correct, Red = incorrect"}),(0,r.jsx)("li",{children:"You have 4 mistakes allowed"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"\uD83D\uDCA1 Tips"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,r.jsx)("li",{children:"All answers relate to one theme"}),(0,r.jsx)("li",{children:"Think about what connects the emojis"}),(0,r.jsx)("li",{children:"The theme is revealed when you win!"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"\uD83C\uDFC6 Daily Challenge"}),(0,r.jsx)("p",{children:"A new puzzle every day at midnight!"})]})]}),(0,r.jsx)("button",{onClick:a,className:"mt-6 w-full py-3 bg-gradient-to-r from-sky-500 to-teal-400 text-white font-semibold rounded-xl hover:shadow-lg transition-all",children:"Got it!"})]})}):null}function N(e){let{puzzle:t,answers:a,correctAnswers:l,checkedWrongAnswers:n,mistakes:i,solved:c,time:d,onUpdateAnswer:m,onCheckAnswers:p,onCheckSingleAnswer:y,theme:w,toggleTheme:N,onSelectPuzzle:z,hintsUsed:T,onUseHint:C,hasCheckedAnswers:A,onReturnToWelcome:S,activeHints:E}=e,P=a.some(e=>""!==e.trim()),[D,O]=(0,s.useState)(!1),[R,L]=(0,s.useState)(!1),[U,V]=(0,s.useState)(!1),{preloadArchive:I}=b(),M=e=>{if(y){let t=y(e);if(!t.gameComplete)try{t.isCorrect?function(){let e=u();if(!e)return;let t=e.currentTime;[{freq:659.25,start:0,duration:.1},{freq:880,start:.05,duration:.15}].forEach(a=>{let{freq:r,start:s,duration:l}=a,n=e.createOscillator(),i=e.createGain();n.type="sine",n.frequency.setValueAtTime(r,t+s),i.gain.setValueAtTime(0,t+s),i.gain.linearRampToValueAtTime(.12,t+s+.01),i.gain.exponentialRampToValueAtTime(.01,t+s+l),n.connect(i),i.connect(e.destination),n.start(t+s),n.stop(t+s+l)})}():a[e].trim()&&function(){let e=u();if(!e)return;let t=e.createOscillator(),a=e.createGain();t.type="sawtooth",t.frequency.setValueAtTime(200,e.currentTime),t.frequency.linearRampToValueAtTime(150,e.currentTime+.1),a.gain.setValueAtTime(.05,e.currentTime),a.gain.exponentialRampToValueAtTime(.01,e.currentTime+.15),t.connect(a),a.connect(e.destination),t.start(e.currentTime),t.stop(e.currentTime+.15)}()}catch(e){}t.isCorrect&&!t.gameComplete&&setTimeout(()=>{let e=document.querySelectorAll('input[type="text"]:not([disabled])'),t=Array.from(e).findIndex(e=>document.activeElement===e);t<e.length-1&&e[t+1].focus()},300)}};return(0,r.jsxs)("div",{className:"animate-slide-up",children:[(0,r.jsxs)("div",{className:"flex justify-end gap-2 mb-4",children:[(0,r.jsx)("button",{onClick:()=>L(!0),className:"w-12 h-12 rounded-full bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm shadow-lg flex items-center justify-center text-xl hover:scale-110 transition-all",title:"Statistics",children:"\uD83D\uDCCA"}),(0,r.jsx)("button",{onClick:()=>V(!0),onMouseEnter:()=>I(),className:"w-12 h-12 rounded-full bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm shadow-lg flex items-center justify-center text-xl hover:scale-110 transition-all",title:"Archive",children:"\uD83D\uDCC5"}),(0,r.jsx)(h,{theme:w,toggleTheme:N})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-sky-500 to-teal-400 dark:from-gray-900 dark:to-gray-900 p-5 text-center",children:[(0,r.jsx)("button",{onClick:S,className:"w-16 h-16 mx-auto mb-2 relative cursor-pointer hover:scale-110 transition-transform",title:"Return to Welcome Screen",children:(0,r.jsx)(x.default,{src:"dark"===w?"/images/dark-mode-logo-2.webp":"/images/alt-logo.webp",alt:"Tandem Logo",width:64,height:64,className:"rounded-xl",priority:!0})}),(0,r.jsxs)("div",{className:"text-white/90 text-sm font-medium",children:["Daily Puzzle ",(null==t?void 0:t.date)?(0,o.mn)(t.date):""]})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)(v,{time:(0,o.mr)(d),mistakes:i,solved:c}),(null==t?void 0:t.theme)&&(0,r.jsx)("div",{className:"text-center mb-4",children:(0,r.jsxs)("div",{className:"inline-block px-4 py-2 bg-gradient-to-r from-sky-100 to-teal-100 dark:from-sky-900/30 dark:to-teal-900/30 rounded-full",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Theme: "}),(0,r.jsx)("span",{className:"text-base font-semibold text-sky-700 dark:text-sky-300",children:t.theme})]})}),(0,r.jsx)("div",{className:"flex flex-col gap-4 mb-6",children:t&&t.puzzles&&t.puzzles.map((e,t)=>(0,r.jsx)(k,{emoji:e.emoji||"❓❓",value:a[t],onChange:e=>m(t,e),isCorrect:l[t],isWrong:n&&n[t],index:t,onEnterPress:()=>M(t),hintData:E&&E[t]},t))}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("button",{onClick:p,disabled:!P,className:"w-full p-4 bg-gradient-to-r from-sky-500 to-teal-400 text-white border-none rounded-xl text-base font-bold cursor-pointer transition-all uppercase tracking-wider hover:-translate-y-0.5 hover:shadow-lg hover:shadow-sky-500/30 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:"Check Answers"}),0===T&&c<4&&(0,r.jsxs)("button",{onClick:()=>{let e=[];for(let t=0;t<4;t++)l[t]||e.push(t);if(e.length>0){let t=Math.floor(Math.random()*e.length),a=e[t];try{!function(){let e=u();if(!e)return;let t=e.currentTime,a=e.createOscillator(),r=e.createGain();a.type="sine",a.frequency.setValueAtTime(880,t),r.gain.setValueAtTime(0,t),r.gain.linearRampToValueAtTime(.2,t+.02),r.gain.setValueAtTime(.15,t+.1),r.gain.exponentialRampToValueAtTime(.001,t+.4),a.connect(r),r.connect(e.destination),a.start(t),a.stop(t+.4),[1760,2637,3520].forEach((a,r)=>{let s=e.createOscillator(),l=e.createGain();s.type="sine",s.frequency.setValueAtTime(a,t+.02+.03*r),l.gain.setValueAtTime(0,t+.02+.03*r),l.gain.linearRampToValueAtTime(.05,t+.03+.03*r),l.gain.exponentialRampToValueAtTime(.001,t+.2+.05*r),s.connect(l),l.connect(e.destination),s.start(t+.02+.03*r),s.stop(t+.3+.05*r)})}()}catch(e){}C(a)}},className:"w-full p-3 bg-yellow-400 hover:bg-yellow-500 dark:bg-amber-600 dark:hover:bg-amber-700 text-gray-800 dark:text-gray-100 border-none rounded-xl text-base font-semibold cursor-pointer transition-all flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDCA1"}),"Use Hint (1 available)"]})]})]})]}),(0,r.jsx)(j,{isOpen:D,onClose:()=>O(!1)}),(0,r.jsx)(g,{isOpen:R,onClose:()=>L(!1)}),(0,r.jsx)(f,{isOpen:U,onClose:()=>V(!1),onSelectPuzzle:z},U?Date.now():"closed")]})}var z=a(79235);function T(e){let{onClose:t}=e,[a,l]=(0,s.useState)({played:0,wins:0,currentStreak:0,bestStreak:0});(0,s.useEffect)(()=>{l((0,c.Nh)())},[]);let n=a.played>0?Math.round(a.wins/a.played*100):0;return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 z-50 flex items-center justify-center p-5 animate-fade-in",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-8 max-w-md w-full animate-modalSlide shadow-2xl",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-extrabold text-gray-800 dark:text-gray-200",children:"Statistics"}),(0,r.jsx)("button",{onClick:t,className:"w-8 h-8 rounded-full border-none bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 text-lg cursor-pointer transition-all hover:bg-gray-200 dark:hover:bg-gray-600",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-sky-100 to-teal-100 dark:from-sky-900 dark:to-teal-900 p-4 rounded-xl text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-extrabold bg-gradient-to-r from-sky-600 to-teal-500 bg-clip-text text-transparent",children:a.played}),(0,r.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 uppercase tracking-wide",children:"Played"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-sky-100 to-teal-100 dark:from-sky-900 dark:to-teal-900 p-4 rounded-xl text-center",children:[(0,r.jsxs)("div",{className:"text-3xl font-extrabold bg-gradient-to-r from-sky-600 to-teal-500 bg-clip-text text-transparent",children:[n,"%"]}),(0,r.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 uppercase tracking-wide",children:"Win Rate"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-sky-100 to-teal-100 dark:from-sky-900 dark:to-teal-900 p-4 rounded-xl text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-extrabold bg-gradient-to-r from-sky-600 to-teal-500 bg-clip-text text-transparent",children:a.currentStreak}),(0,r.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 uppercase tracking-wide",children:"Current Streak"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-sky-100 to-teal-100 dark:from-sky-900 dark:to-teal-900 p-4 rounded-xl text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-extrabold bg-gradient-to-r from-sky-600 to-teal-500 bg-clip-text text-transparent",children:a.bestStreak}),(0,r.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 uppercase tracking-wide",children:"Best Streak"})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-sky-100 to-teal-100 dark:from-sky-900 dark:to-teal-900 p-4 rounded-xl text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-extrabold bg-gradient-to-r from-sky-600 to-teal-500 bg-clip-text text-transparent",children:a.wins}),(0,r.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 uppercase tracking-wide",children:"Total Wins"})]})]})})}var C=a(8774);function A(e){let{shareText:t,className:a=""}=e,[l,n]=(0,s.useState)(!1),[i,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1);(0,s.useEffect)(()=>{d(C.Z.isPlatformNative())},[]);let u=(0,s.useCallback)(async()=>{try{let e=await C.Z.share({title:"Tandem Daily",text:t,url:"https://tandemdaily.com"});C.Z.isPlatformNative()&&await C.Z.haptic("medium"),"clipboard"===e.activityType&&(n(!0),o(!1),setTimeout(()=>{n(!1)},3e3))}catch(e){console.error("Failed to share:",e);try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(t);else{let e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy")}catch(e){throw console.error("Fallback copy failed:",e),Error("Copy failed")}finally{e.remove()}}n(!0),o(!1),setTimeout(()=>{n(!1)},3e3)}catch(e){o(!0),setTimeout(()=>{o(!1)},3e3)}}},[t]);return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:u,className:"\n          w-full py-3 px-4\n          bg-gradient-to-r from-emerald-500 to-teal-500\n          text-white rounded-xl font-semibold\n          hover:shadow-lg transition-all\n          flex items-center justify-center gap-2\n          ".concat(a,"\n        "),"aria-label":"Share results",children:l?"Copied!":i?"Failed to copy":"Share Results"}),l&&(0,r.jsx)("div",{className:"absolute -top-12 left-1/2 transform -translate-x-1/2 animate-fade-in",children:(0,r.jsxs)("div",{className:"bg-gray-900 dark:bg-gray-700 text-white px-3 py-1.5 rounded-lg text-sm whitespace-nowrap",children:["Results copied to clipboard!",(0,r.jsx)("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 rotate-45 w-2 h-2 bg-gray-900 dark:bg-gray-700"})]})})]})}function S(e){let{won:t,time:a,mistakes:l,correctAnswers:n,puzzle:i,puzzleTheme:c,onPlayAgain:d,theme:u,toggleTheme:p,hintsUsed:y,activeHints:w=[],onSelectPuzzle:k,onReturnToWelcome:v}=e,[j,N]=(0,s.useState)(!1),[C,S]=(0,s.useState)(!1),[E,P]=(0,s.useState)(!1),[D,O]=(0,s.useState)(""),{preloadArchive:R}=b(),L=(null==i?void 0:i.date)||(0,o.nz)().isoDate,U=[];w&&w.length>0&&w.forEach((e,t)=>{e&&U.push(t)});let V=(0,o.E4)(L,c||"Tandem Puzzle",a,l,y,U);return(0,s.useEffect)(()=>{if(t){O((0,o.gd)());try{m()}catch(e){}let t=Date.now()+3e3,a={startVelocity:30,spread:360,ticks:60,zIndex:9999};function e(e,t){return Math.random()*(t-e)+e}let r=setInterval(function(){let s=t-Date.now();if(s<=0)return clearInterval(r);let l=s/3e3*50;(0,z.Z)({...a,particleCount:l,origin:{x:e(.1,.3),y:Math.random()-.2},colors:["#0EA5E9","#14B8A6","#06B6D4","#22D3EE","#2DD4BF","#5EEAD4"]}),(0,z.Z)({...a,particleCount:l,origin:{x:e(.7,.9),y:Math.random()-.2},colors:["#0EA5E9","#14B8A6","#06B6D4","#22D3EE","#2DD4BF","#5EEAD4"]})},250);return()=>clearInterval(r)}},[t]),(0,r.jsxs)("div",{className:"animate-fade-in",children:[(0,r.jsxs)("div",{className:"flex justify-end gap-2 mb-4",children:[(0,r.jsx)("button",{onClick:()=>S(!0),className:"w-12 h-12 rounded-full bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm shadow-lg flex items-center justify-center text-xl hover:scale-110 transition-all",title:"Statistics",children:"\uD83D\uDCCA"}),(0,r.jsx)("button",{onClick:()=>P(!0),onMouseEnter:()=>R(),className:"w-12 h-12 rounded-full bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm shadow-lg flex items-center justify-center text-xl hover:scale-110 transition-all",title:"Archive",children:"\uD83D\uDCC5"}),(0,r.jsx)(h,{theme:u,toggleTheme:p})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl overflow-hidden p-10 text-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{onClick:v,className:"w-24 h-24 mx-auto mb-6 relative flex items-center justify-center cursor-pointer hover:scale-110 transition-transform",title:"Return to Welcome Screen",children:(0,r.jsx)(x.default,{src:"dark"===u?"/images/dark-mode-logo-2.webp":"/images/main-logo.webp",alt:"Tandem Logo",width:96,height:96,className:"rounded-2xl"})}),(0,r.jsx)("h1",{className:"text-4xl font-bold mb-2 text-gray-800 dark:text-gray-200",children:t?D:"Better luck next time!"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:t?"You solved today's puzzle!":"You'll get it tomorrow!"}),c&&(0,r.jsxs)("div",{className:"bg-gradient-to-r from-sky-100 to-teal-100 dark:from-sky-900 dark:to-teal-900 rounded-2xl p-4 mb-6",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Theme:"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200",children:c})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-4",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200",children:(0,o.mr)(a)}),(0,r.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Time"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-4",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200",children:[l,"/4"]}),(0,r.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Mistakes"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-4",children:[(0,r.jsx)("div",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:(0,o.mn)(L)}),(0,r.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Date"})]})]}),y>0&&(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:["\uD83D\uDCA1 ",y," hint",y>1?"s":""," used"]}),!t&&(null==i?void 0:i.puzzles)&&(0,r.jsxs)("div",{className:"bg-gradient-to-r from-rose-50 to-pink-50 dark:from-gray-800 dark:to-gray-700 rounded-2xl p-6 mb-6",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200 mb-4",children:"Correct Answers:"}),(0,r.jsx)("div",{className:"space-y-3",children:i.puzzles.map((e,t)=>{let a=e.answer.split(",")[0].trim();return(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white dark:bg-gray-900 rounded-xl px-4 py-3",children:[(0,r.jsx)("span",{className:"text-2xl",children:e.emoji}),(0,r.jsx)("span",{className:"font-semibold text-gray-800 dark:text-gray-100",children:a})]},t)})})]})]}),(0,r.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,r.jsx)(A,{shareText:V}),(0,r.jsx)("button",{onClick:()=>P(!0),onMouseEnter:()=>R(),className:"w-full py-3 px-4 bg-gradient-to-r from-sky-500 to-teal-400 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:"Play from Archive"})]}),(0,r.jsx)("button",{onClick:()=>N(!0),className:"text-sky-600 dark:text-sky-400 hover:underline text-sm",children:"View All Statistics"})]}),j&&(0,r.jsx)(T,{onClose:()=>N(!1)}),(0,r.jsx)(g,{isOpen:C,onClose:()=>S(!1)}),(0,r.jsx)(f,{isOpen:E,onClose:()=>P(!1),onSelectPuzzle:e=>{P(!1),setTimeout(()=>{k(e)},100)}})]})}var E=a(81560);class P{buildUrl(e){return C.Z.isPlatformNative()?"".concat(this.baseUrl).concat(e):e}async fetchWithErrorHandling(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a=this.buildUrl(e),r=await fetch(a,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!r.ok)throw Error("API Error: ".concat(r.status));return await r.json()}catch(e){throw console.error("API fetch error:",e),C.Z.isPlatformNative()&&!C.Z.isOnline()&&console.log("Device is offline, attempting to use cached data"),e}}async getPuzzle(e){return C.Z.fetchPuzzle(e)}async getBatchPuzzles(e){try{return await this.fetchWithErrorHandling("/api/puzzles/batch",{method:"POST",body:JSON.stringify({dates:e})})}catch(a){console.log("Batch fetch failed, falling back to individual fetches");let t={};for(let a of e)try{let e=await this.getPuzzle(a);t[a]=e}catch(e){console.error("Failed to fetch puzzle for ".concat(a,":"),e)}return{puzzles:t}}}async getStats(){return C.Z.fetchStats()}async updateStats(e){return C.Z.updateStats(e)}async adminAuth(e){if(C.Z.isPlatformNative())throw Error("Admin features are not available on mobile");return await this.fetchWithErrorHandling("/api/admin/auth",{method:"POST",body:JSON.stringify({password:e})})}async getAdminPuzzles(e,t){if(C.Z.isPlatformNative())throw Error("Admin features are not available on mobile");let a=new URLSearchParams;return e&&a.append("start",e),t&&a.append("end",t),await this.fetchWithErrorHandling("/api/admin/puzzles?".concat(a))}async saveAdminPuzzle(e){if(C.Z.isPlatformNative())throw Error("Admin features are not available on mobile");let t=e.id?"PUT":"POST";return await this.fetchWithErrorHandling("/api/admin/puzzles",{method:t,body:JSON.stringify(e)})}async deleteAdminPuzzle(e){if(C.Z.isPlatformNative())throw Error("Admin features are not available on mobile");return await this.fetchWithErrorHandling("/api/admin/puzzles?id=".concat(e),{method:"DELETE"})}async bulkImportPuzzles(e){if(C.Z.isPlatformNative())throw Error("Admin features are not available on mobile");return await this.fetchWithErrorHandling("/api/admin/bulk-import",{method:"POST",body:JSON.stringify({puzzles:e})})}async checkVersion(){try{return await this.fetchWithErrorHandling("/api/version")}catch(e){return console.error("Version check failed:",e),null}}async preloadPuzzlesForOffline(){if(C.Z.isPlatformNative())try{await C.Z.cacheRecentPuzzles(),console.log("Puzzles preloaded for offline use")}catch(e){console.error("Failed to preload puzzles:",e)}}constructor(){this.baseUrl=C.Z.apiUrl}}let D=new P,O="1.0.0";function R(){let[e,t]=(0,s.useState)(!1),[a,l]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(!C.Z.isPlatformNative())return;let e=async()=>{try{let e=await D.checkVersion();if(e){l(e);let a=e.minSupportedClient||"1.0.0";n(O,a)&&t(!0)}}catch(e){console.error("Version check failed:",e)}};e();let a=setInterval(e,36e5);return()=>clearInterval(a)},[]);let n=(e,t)=>{let a=e.split(".").map(Number),r=t.split(".").map(Number);for(let e=0;e<3;e++){let t=a[e]||0,s=r[e]||0;if(t<s)return!0;if(t>s)break}return!1};return e?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full shadow-2xl",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-sky-500 to-teal-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:"Update Required"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"A new version of Tandem is available. Please update the app to continue playing."}),(0,r.jsxs)("div",{className:"space-y-2 text-sm text-gray-500 dark:text-gray-400 mb-6",children:[(0,r.jsxs)("p",{children:["Current version: ",O]}),(0,r.jsxs)("p",{children:["Required version: ",(null==a?void 0:a.minSupportedClient)||"1.0.0"]})]}),(0,r.jsx)("a",{href:"https://apps.apple.com/app/tandem-daily",className:"inline-block w-full py-3 px-4 bg-gradient-to-r from-sky-500 to-teal-500 text-white rounded-xl font-semibold hover:shadow-lg transition-all",target:"_blank",rel:"noopener noreferrer",children:"Update Now"})]})})}):null}function L(e){var t;let{initialPuzzleData:a}=e,n=function(e){let[t,a]=(0,s.useState)(l.wp.WELCOME),[r,n]=(0,s.useState)((null==e?void 0:e.puzzle)||null),[d,x]=(0,s.useState)(["","","",""]),[h,g]=(0,s.useState)([!1,!1,!1,!1]),[p,f]=(0,s.useState)(0),[y,b]=(0,s.useState)(0),[w,k]=(0,s.useState)(!e),[v,j]=(0,s.useState)(e?null:"Failed to load puzzle"),[N,z]=(0,s.useState)(!1),[T,C]=(0,s.useState)((null==e?void 0:e.date)||null),[A,S]=(0,s.useState)(0),[E,P]=(0,s.useState)(!1),[D,O]=(0,s.useState)([!1,!1,!1,!1]),[R,L]=(0,s.useState)(!1),[U,V]=(0,s.useState)([null,null,null,null]),[I,M]=(0,s.useState)([!1,!1,!1,!1]);(0,s.useEffect)(()=>{e||async function(){try{let e=new Date().toISOString().split("T")[0];C(e);let t=await i.getPuzzle();if(t&&t.puzzle){let a={...t.puzzle,puzzleNumber:t.puzzle.puzzleNumber||t.puzzleNumber,date:t.date||e};n(a),j(null)}else t?(n(t),j(null)):j("No puzzle available")}catch(e){j("Failed to load puzzle")}finally{k(!1)}}()},[e]);let Z=(0,s.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{k(!0),j(null);let t=null!==e;z(t);let r=e||new Date().toISOString().split("T")[0];C(r);let s=await i.getPuzzle(e);if(s&&s.puzzle){let e={...s.puzzle,puzzleNumber:s.puzzle.puzzleNumber||s.puzzleNumber,date:s.date||r};return n(e),a(l.wp.WELCOME),x(["","","",""]),g([!1,!1,!1,!1]),O([!1,!1,!1,!1]),f(0),b(0),V([null,null,null,null]),M([!1,!1,!1,!1]),!0}if(s)return n(s),a(l.wp.WELCOME),x(["","","",""]),g([!1,!1,!1,!1]),O([!1,!1,!1,!1]),f(0),b(0),V([null,null,null,null]),M([!1,!1,!1,!1]),!0;return j("No puzzle available"),!1}catch(e){return j("Failed to load puzzle"),!1}finally{k(!1)}},[]),_=(0,s.useCallback)(()=>{r&&(a(l.wp.PLAYING),f(0),b(0),x(["","","",""]),g([!1,!1,!1,!1]),O([!1,!1,!1,!1]),j(null),S(0),P(!1),V([null,null,null,null]),M([!1,!1,!1,!1]),T&&(0,c._s)(T,{started:!0,solved:0,mistakes:0,hintsUsed:0}))},[r,T]),F=(0,s.useCallback)((e,t)=>{let a=(0,o.N1)(t);x(t=>{let r=[...t];return r[e]=a,r}),D[e]&&O(t=>{let a=[...t];return a[e]=!1,a})},[D]),H=(0,s.useCallback)(async e=>{a(l.wp.COMPLETE),L(e),e?m():function(){let e=u();if(!e)return;let t=e.currentTime;[{freq:523.25,start:0,duration:.2},{freq:440,start:.15,duration:.2},{freq:392,start:.3,duration:.25},{freq:329.63,start:.45,duration:.35}].forEach(a=>{let{freq:r,start:s,duration:l}=a,n=e.createOscillator(),i=e.createGain();n.type="triangle",n.frequency.setValueAtTime(r,t+s),i.gain.setValueAtTime(0,t+s),i.gain.linearRampToValueAtTime(.08,t+s+.03),i.gain.setValueAtTime(.06,t+s+.5*l),i.gain.exponentialRampToValueAtTime(.001,t+s+l),n.connect(i),i.connect(e.destination),n.start(t+s),n.stop(t+s+l)});let a=e.createOscillator(),r=e.createGain();a.type="sine",a.frequency.setValueAtTime(164.81,t+.3),r.gain.setValueAtTime(0,t+.3),r.gain.linearRampToValueAtTime(.04,t+.35),r.gain.setValueAtTime(.03,t+.6),r.gain.exponentialRampToValueAtTime(.001,t+.8),a.connect(r),r.connect(e.destination),a.start(t+.3),a.stop(t+.8)}();let t=new Date().toISOString().split("T")[0],r=!N&&T===t&&!(0,c._$)();if((0,c.l8)(e,r,N),!N)try{await i.submitCompletion({completed:e,time:0,mistakes:p})}catch(e){console.error("Failed to submit completion:",e)}T&&(0,c.C3)(T,{won:e,completed:e,failed:!e,status:e?"completed":"failed",mistakes:p,solved:y,time:0,hintsUsed:A,hintPositionsUsed:I,attempted:!0})},[N,p,y,T,A,I]),q=(0,s.useCallback)(e=>{if(h[e])return{isCorrect:!1,gameComplete:!1};let t=d[e].trim();if(!t)return{isCorrect:!1,gameComplete:!1};let a=r.puzzles[e];if(!(0,o.Og)(t,a.answer))return f(e=>{let t=Math.min(e+1,l.th.MAX_MISTAKES);return T&&(0,c._s)(T,{solved:y,mistakes:t,hintsUsed:A}),t>=l.th.MAX_MISTAKES&&H(!1),t}),O(t=>{let a=[...t];return a[e]=!0,a}),{isCorrect:!1,gameComplete:p+1>=l.th.MAX_MISTAKES};if(g(t=>{let a=[...t];return a[e]=!0,a}),U[e]){let t=[...U];t[e]=null,V(t)}return b(e=>{let t=e+1;return T&&(0,c._s)(T,{solved:t,mistakes:p,hintsUsed:A}),t===l.th.PUZZLE_COUNT&&H(!0),t}),{isCorrect:!0,gameComplete:y+1===l.th.PUZZLE_COUNT}},[d,h,r,y,p,H,T,A,U]),W=(0,s.useCallback)(()=>{let e=0,t=0,a=[...h],s=[...D];return P(!0),d.forEach((l,n)=>{if(!h[n]&&l.trim()){let i=r.puzzles[n];(0,o.Og)(l,i.answer)?(a[n]=!0,e++):(t++,s[n]=!0)}}),g(a),O(s),e>0&&b(a=>{let r=a+e;return T&&(0,c._s)(T,{solved:r,mistakes:p+t,hintsUsed:A}),r===l.th.PUZZLE_COUNT&&H(!0),r}),t>0&&f(a=>{let r=Math.min(a+t,l.th.MAX_MISTAKES);return T&&(0,c._s)(T,{solved:y+e,mistakes:r,hintsUsed:A}),r>=l.th.MAX_MISTAKES&&H(!1),r}),{correct:e,incorrect:t}},[d,h,r,y,p,H,T,A,D]),G=(0,s.useCallback)(e=>{if(!r||!r.puzzles||A>0)return;let t=e;if(null==t||h[t]){let e=[];for(let t=0;t<r.puzzles.length;t++)h[t]||e.push(t);if(0===e.length)return;t=e[Math.floor(Math.random()*e.length)]}let a=r.puzzles[t].answer,s=a.includes(",")?a.split(",")[0].trim():a,l={firstLetter:s.charAt(0).toUpperCase(),length:s.length,fullAnswer:s.toUpperCase()},n=[...U];n[t]=l,V(n);let i=[...I];i[t]=!0,M(i),S(1),T&&(0,c._s)(T,{started:!0,solved:y,mistakes:p,hintsUsed:1})},[r,h,A,U,I,T,y,p]);return{gameState:t,puzzle:r,answers:d,correctAnswers:h,checkedWrongAnswers:D,mistakes:p,solved:y,loading:w,error:v,won:R,hintsUsed:A,hasCheckedAnswers:E,activeHints:U,hintPositionsUsed:I,startGame:_,updateAnswer:F,checkAnswers:W,checkSingleAnswer:q,completeGame:H,loadPuzzle:Z,useHint:G,resetGame:(0,s.useCallback)(()=>{a(l.wp.WELCOME),x(["","","",""]),g([!1,!1,!1,!1]),O([!1,!1,!1,!1]),f(0),b(0),S(0),P(!1),V([null,null,null,null]),M([!1,!1,!1,!1])},[]),returnToWelcome:(0,s.useCallback)(()=>{a(l.wp.WELCOME)},[])}}(a),d=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,a]=(0,s.useState)(0),r=(0,s.useRef)(null),l=(0,s.useRef)(null);return(0,s.useEffect)(()=>(e?(l.current=Date.now()-1e3*t,r.current=setInterval(()=>{a(Math.floor((Date.now()-l.current)/1e3))},1e3)):r.current&&(clearInterval(r.current),r.current=null),()=>{r.current&&clearInterval(r.current)}),[e]),{elapsed:t,reset:()=>{a(0),l.current=Date.now()},pause:()=>{r.current&&(clearInterval(r.current),r.current=null)},resume:()=>{!r.current&&l.current&&(r.current=setInterval(()=>{a(Math.floor((Date.now()-l.current)/1e3))},1e3))}}}(n.gameState===l.wp.PLAYING),{theme:x,toggleTheme:h}=function(){let[e,t]=(0,s.useState)(l.mR.DEFAULT);return(0,s.useEffect)(()=>{let e=localStorage.getItem(l.I.THEME)||l.mR.DEFAULT;t(e),document.documentElement.setAttribute("data-theme",e),e===l.mR.DARK?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[]),{theme:e,toggleTheme:()=>{let a=e===l.mR.DARK?l.mR.LIGHT:l.mR.DARK;t(a),document.documentElement.setAttribute("data-theme",a),localStorage.setItem(l.I.THEME,a),a===l.mR.DARK?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},setThemeMode:e=>{(e===l.mR.LIGHT||e===l.mR.DARK)&&(t(e),document.documentElement.setAttribute("data-theme",e),localStorage.setItem(l.I.THEME,e),e===l.mR.DARK?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))},isDark:e===l.mR.DARK}}(),{playSound:g}=function(){let[e,t]=(0,s.useState)(!0),a=(0,s.useRef)(null);(0,s.useEffect)(()=>{t("false"!==localStorage.getItem(l.I.SOUND))},[]);let r=()=>{a.current||(a.current=new(window.AudioContext||window.webkitAudioContext))},n=t=>{if(!e||!l.p1.ENABLED)return;r();let s=a.current;if(!s)return;let n=l.p1.SOUNDS[t.toUpperCase()];if(!n)return;let{frequencies:i,duration:o}=n;if("complete"===t)i.forEach((e,t)=>{let a=s.createOscillator(),r=s.createGain();a.connect(r),r.connect(s.destination),a.frequency.setValueAtTime(e,s.currentTime+.1*t),r.gain.setValueAtTime(l.p1.VOLUME,s.currentTime+.1*t),r.gain.exponentialRampToValueAtTime(.01,s.currentTime+.1*t+o),a.start(s.currentTime+.1*t),a.stop(s.currentTime+.1*t+o)});else{let e=s.createOscillator(),t=s.createGain();e.connect(t),t.connect(s.destination),i.forEach((t,a)=>{e.frequency.setValueAtTime(t,s.currentTime+o/i.length*a)}),t.gain.setValueAtTime(l.p1.VOLUME,s.currentTime),t.gain.exponentialRampToValueAtTime(.01,s.currentTime+o),e.start(s.currentTime),e.stop(s.currentTime+o)}};return{soundEnabled:e,toggleSound:()=>{let a=!e;t(a),localStorage.setItem(l.I.SOUND,a.toString()),a&&n("correct")},playSound:n}}(),p=async e=>{await n.loadPuzzle(e)&&n.startGame()},f="dark"===x?"url('/images/dark-mode-bg.webp')":"url('/images/light-mode-bg.webp')";return n.loading?(0,r.jsx)("div",{className:"fixed inset-0 w-full h-full flex items-center justify-center",style:{backgroundImage:"url('/images/light-mode-bg.webp')",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:(0,r.jsx)(E.Z,{})}):n.error?(0,r.jsx)("div",{className:"fixed inset-0 w-full h-full flex items-center justify-center",style:{backgroundImage:f,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-8 max-w-md text-center mx-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800 dark:text-gray-200",children:"Oops!"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:n.error}),(0,r.jsx)("button",{onClick:n.loadPuzzle,className:"px-6 py-3 bg-sky-600 text-white rounded-xl hover:bg-sky-700 transition-colors",children:"Try Again"})]})}):(0,r.jsxs)("div",{className:"fixed inset-0 w-full h-full overflow-y-auto overflow-x-hidden",style:{backgroundImage:f,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed"},children:[(0,r.jsx)(R,{}),(0,r.jsx)("div",{className:"fixed bottom-0 left-0 right-0 py-3 px-4 text-center",children:(0,r.jsxs)("p",{className:"text-xs text-white/60",children:["\xa9 2025 Tandem - by"," ",(0,r.jsx)("a",{href:"https://www.goodvibesgames.com",target:"_blank",rel:"noopener noreferrer",className:"text-white/70 hover:text-white/90 transition-colors underline",children:"Good Vibes Games"})]})}),(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center py-6",children:(0,r.jsxs)("div",{className:"w-full max-w-xl mx-auto p-6 animate-fade-in relative z-10 my-auto",children:[n.gameState===l.wp.WELCOME&&(0,r.jsx)(w,{onStart:n.startGame,theme:x,toggleTheme:h,onSelectPuzzle:p,puzzle:n.puzzle}),n.gameState===l.wp.PLAYING&&(0,r.jsx)(N,{puzzle:n.puzzle,answers:n.answers,correctAnswers:n.correctAnswers,checkedWrongAnswers:n.checkedWrongAnswers,mistakes:n.mistakes,solved:n.solved,time:d.elapsed,onUpdateAnswer:n.updateAnswer,onCheckAnswers:()=>{let e=n.checkAnswers();e.correct>0&&g("correct"),e.incorrect>0&&g("incorrect")},onCheckSingleAnswer:n.checkSingleAnswer,theme:x,toggleTheme:h,onSelectPuzzle:p,hintsUsed:n.hintsUsed,onUseHint:n.useHint,hasCheckedAnswers:n.hasCheckedAnswers,onReturnToWelcome:n.returnToWelcome,activeHints:n.activeHints}),n.gameState===l.wp.COMPLETE&&(0,r.jsx)(S,{won:n.won,time:d.elapsed,mistakes:n.mistakes,correctAnswers:n.solved,puzzle:n.puzzle,puzzleTheme:null===(t=n.puzzle)||void 0===t?void 0:t.theme,onPlayAgain:n.resetGame,theme:x,toggleTheme:h,hintsUsed:n.hintsUsed,activeHints:n.hintPositionsUsed,onSelectPuzzle:p,onReturnToWelcome:n.returnToWelcome})]})})]})}},81560:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(57437);function s(){return(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-white/20 border-t-white rounded-full animate-spin"}),(0,r.jsx)("p",{className:"mt-4 text-white text-lg",children:"Loading puzzle..."})]})}},8774:function(e,t,a){"use strict";var r=a(56689),s=a(21021),l=a(98140),n=a(31671),i=a(40257);class o{isPlatformNative(){return this.isNative}isPlatformWeb(){return this.isWeb}async fetchPuzzle(e){let t="".concat(this.apiUrl,"/api/puzzle?date=").concat(e);try{let a=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("API Error: ".concat(a.status));let r=await a.json();return this.isNative&&await this.cachePuzzle(e,r),r}catch(t){if(console.error("Error fetching puzzle:",t),this.isNative){let t=await this.getOfflinePuzzle(e);if(t)return t}throw t}}async fetchStats(){let e="".concat(this.apiUrl,"/api/stats");try{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch stats");return await t.json()}catch(e){return console.error("Error fetching stats:",e),{played:0,won:0,currentStreak:0,maxStreak:0}}}async updateStats(e){let t="".concat(this.apiUrl,"/api/stats");try{let a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw Error("Failed to update stats");return await a.json()}catch(e){throw console.error("Error updating stats:",e),e}}async cachePuzzle(e,t){if(this.isNative)try{let a="".concat(this.CACHE_PREFIX).concat(e);await n.u.set({key:a,value:JSON.stringify(t)}),await this.cleanOldCache()}catch(e){console.error("Error caching puzzle:",e)}}async getOfflinePuzzle(e){if(!this.isNative)return null;try{let t="".concat(this.CACHE_PREFIX).concat(e),{value:a}=await n.u.get({key:t});return a?JSON.parse(a):null}catch(e){return console.error("Error getting offline puzzle:",e),null}}async cacheRecentPuzzles(){if(this.isNative)try{let e=new Date,t=[];for(let a=0;a<this.CACHE_DAYS;a++){let r=new Date(e);r.setDate(r.getDate()-a);let s=r.toISOString().split("T")[0];t.push(this.fetchPuzzle(s).catch(()=>null))}await Promise.all(t),console.log("Recent puzzles cached for offline use")}catch(e){console.error("Error caching recent puzzles:",e)}}async cleanOldCache(){if(this.isNative)try{let{keys:e}=await n.u.keys(),t=new Date,a=new Date(t);for(let t of(a.setDate(a.getDate()-this.CACHE_DAYS),e))if(t.startsWith(this.CACHE_PREFIX)){let e=t.replace(this.CACHE_PREFIX,"");new Date(e)<a&&await n.u.remove({key:t})}}catch(e){console.error("Error cleaning cache:",e)}}async share(e){try{if(this.isNative&&s.m)return await s.m.share({title:e.title||"Tandem Daily",text:e.text,url:e.url||"https://tandemdaily.com",dialogTitle:"Share your results"});if(navigator.share)return await navigator.share(e),{activityType:"web"};return await navigator.clipboard.writeText(e.text),{activityType:"clipboard"}}catch(t){console.error("Error sharing:",t);try{return await navigator.clipboard.writeText(e.text),{activityType:"clipboard"}}catch(e){throw t}}}async haptic(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"medium";if(this.isNative&&l.ej)try{let t={light:l.y$.Light,medium:l.y$.Medium,heavy:l.y$.Heavy};await l.ej.impact({style:t[e]||l.y$.Medium})}catch(e){console.error("Haptic feedback error:",e)}}async vibrate(){if(this.isNative&&l.ej)try{await l.ej.vibrate({duration:100})}catch(e){console.error("Vibration error:",e)}}async getPreference(e){if(!this.isNative)return localStorage.getItem(e);try{let{value:t}=await n.u.get({key:e});return t}catch(e){return console.error("Error getting preference:",e),null}}async setPreference(e,t){if(this.isNative)try{await n.u.set({key:e,value:t})}catch(e){console.error("Error setting preference:",e)}else localStorage.setItem(e,t)}getApiUrl(e){return"".concat(this.apiUrl).concat(e)}isOnline(){return navigator.onLine}constructor(){this.isNative=r.Capacitor.isNativePlatform(),this.isIOS="ios"===r.Capacitor.getPlatform(),this.isWeb="web"===r.Capacitor.getPlatform(),this.apiUrl=this.isNative?"https://tandemdaily.com":i.env.NEXT_PUBLIC_API_URL||"",this.CACHE_PREFIX="tandem_puzzle_",this.CACHE_DAYS=7}}let c=new o;t.Z=c}},function(e){e.O(0,[689,896,833,241,971,117,744],function(){return e(e.s=5777)}),_N_E=e.O()}]);